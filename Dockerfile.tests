# tests container
FROM golang:1.16

WORKDIR /go/src/github.com/Nexenta/nexentastor-csi-driver-block/
COPY . ./

ARG VERSION
ARG TESTRAIL_URL
ARG TESTRAIL_USR
ARG TESTRAIL_PSWD

ENV VERSION=$VERSION \
    TESTRAIL_URL=$TESTRAIL_URL \
    TESTRAIL_USR=$TESTRAIL_USR \
    TESTRAIL_PSWD=$TESTRAIL_PSWD

ENTRYPOINT ["make"]
CMD ["test"]